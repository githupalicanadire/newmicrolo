@page "{orderId:guid}"
@model Shopping.Web.Pages.OrderDetailModel
@{
    ViewData["Title"] = "Order Details";
}

<div class="container py-4">
    <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb bg-gradient-primary rounded p-3 mb-0 shadow-sm">
            <li class="breadcrumb-item"><a asp-page="Index" class="text-white text-decoration-none"><i class="fas fa-home me-1"></i>Home</a></li>
            <li class="breadcrumb-item"><a asp-page="OrderList" class="text-white text-decoration-none"><i class="fas fa-list me-1"></i>Orders</a></li>
            <li class="breadcrumb-item active text-white" aria-current="page"><i class="fas fa-info-circle me-1"></i>Order Details</li>
        </ol>
    </nav>

    <div class="row">
        <div class="col-md-12">
            <div class="card border-0 shadow-sm">
                <div class="card-header bg-gradient-primary text-white py-3">
                    <h5 class="mb-0"><i class="fas fa-info-circle me-2"></i>Order #@Model.Order.Id.ToString().Substring(0, 8)</h5>
                </div>
                <div class="card-body">
                    <div class="row mb-4">
                        <div class="col-md-6">
                            <h6 class="text-primary mb-3">Order Information</h6>
                            <p><strong>Order Name:</strong> @Model.Order.OrderName</p>
                            <p><strong>Status:</strong> <span class="badge @(Model.Order.Status.ToString().ToLower() switch { "draft" => "bg-secondary", "pending" => "bg-warning", "completed" => "bg-success", "cancelled" => "bg-danger", _ => "bg-secondary" })">@Model.Order.Status</span></p>
                            <p><strong>Total Amount:</strong> @Model.Order.OrderItems.Sum(x => x.Price * x.Quantity) TL</p>
                        </div>
                        <div class="col-md-6">
                            <h6 class="text-primary mb-3">Customer Information</h6>
                            <p><strong>Name:</strong> @Model.Order.ShippingAddress.FirstName @Model.Order.ShippingAddress.LastName</p>
                            <p><strong>Email:</strong> @Model.Order.ShippingAddress.EmailAddress</p>
                            <p><strong>Address:</strong> @Model.Order.ShippingAddress.AddressLine, @Model.Order.ShippingAddress.State @Model.Order.ShippingAddress.ZipCode, @Model.Order.ShippingAddress.Country</p>
                        </div>
                    </div>

                    <h6 class="text-primary mb-3">Order Items</h6>
                    <div class="table-responsive">
                        <table class="table align-middle">
                            <thead>
                                <tr>
                                    <th scope="col">Product ID</th>
                                    <th scope="col">Quantity</th>
                                    <th scope="col">Price</th>
                                    <th scope="col" class="text-end">Total</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var item in Model.Order.OrderItems)
                                {
                                    <tr>
                                        <td>@item.ProductId.ToString().Substring(0, 8)</td>
                                        <td>@item.Quantity</td>
                                        <td>@item.Price TL</td>
                                        <td class="text-end">@(item.Price * item.Quantity) TL</td>
                                    </tr>
                                }
                            </tbody>
                            <tfoot>
                                <tr>
                                    <td colspan="3" class="text-end">
                                        <strong>Total:</strong>
                                    </td>
                                    <td class="text-end">
                                        <strong class="text-primary">@Model.Order.OrderItems.Sum(x => x.Price * x.Quantity) TL</strong>
                                    </td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>

                    <div class="mt-4">
                        <a asp-page="OrderList" class="btn btn-primary">
                            <i class="fas fa-arrow-left me-2"></i>Back to Orders
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .breadcrumb {
        background: linear-gradient(45deg, var(--primary-color), var(--accent-color));
    }

    .breadcrumb-item + .breadcrumb-item::before {
        color: rgba(255,255,255,0.8);
    }

    .table {
        color: var(--dark-text);
    }

    .table > :not(caption) > * > * {
        background-color: var(--dark-card-bg);
        border-bottom-color: var(--dark-border);
    }

    .table > thead {
        border-bottom: 2px solid var(--dark-border);
    }

    .badge {
        padding: 0.5em 1em;
        font-weight: 500;
    }

    .bg-gradient-primary {
        background: linear-gradient(45deg, var(--primary-color), var(--accent-color));
    }
</style> 